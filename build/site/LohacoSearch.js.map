{"version":3,"sources":["../../src/site/LohacoSearch.js"],"names":["LOHACO_CONSTANTS","searchConfig","prefix","top","searchPageSelectors","productsLink","nextLink","searchText","searchButton","productPageSelectors","jan","title","productPageImageSelectors","picture","replacer","REPLACERS","toHarfWidthSpace","toOneSpace","toHarfWidthAlnum","pattern","value","toOneLine","category","LohacoSearch","JanSearchBase","init","popupedModal","existsAll","page","click","waitLoaded","getSrcConfig"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,gBAAgB,GAAG;AACvBC,EAAAA,YAAY,EAAE;AACZC,IAAAA,MAAM,EAAE,QADI;AAEZC,IAAAA,GAAG,EAAE,oBAFO;AAGZC,IAAAA,mBAAmB,EAAE;AACnBC,MAAAA,YAAY,EAAE,oBADK;AAEnBC,MAAAA,QAAQ,EAAE,eAFS;AAGnBC,MAAAA,UAAU,EAAE,eAHO;AAInBC,MAAAA,YAAY,EAAE;AAJK,KAHT;AASZC,IAAAA,oBAAoB,EAAE;AACpBC,MAAAA,GAAG,EAAE,6BADe;AAEpB;AACAC,MAAAA,KAAK,EAAE;AAHa,KATV;AAcZC,IAAAA,yBAAyB,EAAE;AACzBC,MAAAA,OAAO,EAAE;AADgB,KAdf;AAiBZC,IAAAA,QAAQ,EAAE;AACRH,MAAAA,KAAK,EAAE,CACLI,oBAAUC,gBADL,EAELD,oBAAUE,UAFL,EAGLF,oBAAUG,gBAHL,EAGuB;AAC1BC,QAAAA,OAAO,EAAE,iBADiB;AAE1BC,QAAAA,KAAK,EAAE;AAFmB,OAHvB,CADC;AASRV,MAAAA,GAAG,EAAE,CACHK,oBAAUM,SADP,EACkB;AACnBF,QAAAA,OAAO,EAAE,aADU;AAEnBC,QAAAA,KAAK,EAAE;AAFY,OADlB,EAIA;AACDD,QAAAA,OAAO,EAAE,SADR;AAEDC,QAAAA,KAAK,EAAE;AAFN,OAJA,CATG;AAkBRE,MAAAA,QAAQ,EAAE,CACRP,oBAAUE,UADF;AAlBF;AAjBE;AADS,CAAzB;;AA2Ce,MAAMM,YAAN,SAA2BC,sBAA3B,CAAyC;AAEtD;AACF;AACA;AACY,QAAJC,IAAI,GAAG;AACX,UAAMC,YAAY,GAAG,MAAM,KAAKC,SAAL,CAAe,6BAAf,CAA3B;;AACA,QAAID,YAAJ,EAAkB;AAChB,WAAKE,IAAL,CAAUC,KAAV,CAAgB,6BAAhB;AACA,YAAM,KAAKC,UAAL,EAAN;AACD;AACF;;AAEDC,EAAAA,YAAY,GAAG;AACb,WAAO/B,gBAAgB,CAACC,YAAxB;AACD;;AAfqD","sourcesContent":["import JanSearchBase from './JanSearchBase';\nimport { REPLACERS } from '../util/Replacer';\n\nconst LOHACO_CONSTANTS = {\n  searchConfig: {\n    prefix: 'Lohaco',\n    top: 'https://lohaco.jp/',\n    searchPageSelectors: {\n      productsLink: 'div.prodImgBlc > a',\n      nextLink: 'p.nextBtn > a',\n      searchText: '#jsi-txtKeywd',\n      searchButton: 'div.searchBtn',\n    },\n    productPageSelectors: {\n      jan: 'table.prodSpecTable > tbody',\n      // category: 'div.blcCategoryNav div.blcCatNav',\n      title: 'title',\n    },\n    productPageImageSelectors: {\n      picture: '#elmMainPhoto img',\n    },\n    replacer: {\n      title: [\n        REPLACERS.toHarfWidthSpace,\n        REPLACERS.toOneSpace,\n        REPLACERS.toHarfWidthAlnum, {\n          pattern: /.*LOHACO *\\- */g,\n          value: '',\n        },\n      ],\n      jan: [\n        REPLACERS.toOneLine, {\n          pattern: /.*JANコード\\s*/,\n          value: '',\n        }, {\n          pattern: /\\s+.*$/g,\n          value: '',\n        }\n      ],\n      category: [\n        REPLACERS.toOneSpace,\n      ],\n    },\n  },\n};\n\nexport default class LohacoSearch extends JanSearchBase {\n\n  /**\n   * 検索可能画面になるまで遷移する。\n   */\n  async init() {\n    const popupedModal = await this.existsAll('div.campaignModal > p.close');\n    if (popupedModal) {\n      this.page.click('div.campaignModal > p.close')\n      await this.waitLoaded();\n    }\n  }\n\n  getSrcConfig() {\n    return LOHACO_CONSTANTS.searchConfig;\n  }\n}\n"],"file":"LohacoSearch.js"}