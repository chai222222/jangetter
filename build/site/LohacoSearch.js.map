{"version":3,"sources":["../../src/site/LohacoSearch.js"],"names":["LOHACO_CONSTANTS","searchConfig","prefix","top","searchPageSelectors","productsLink","nextLink","searchText","searchButton","productPageSelectors","jan","category","title","replacer","pattern","value","REPLACERS","toHarfWidthSpace","toHarfWidthAlnum","TajimaSearch","existsAll","popupedModal","page","click","waitLoaded","JanSearchBase"],"mappings":";;;;;;;;AAAA;;;;;;;;;;;;;;AAEA,IAAMA,mBAAmB;AACvBC,gBAAc;AACZC,YAAQ,QADI;AAEZC,SAAK,oBAFO;AAGZC,yBAAqB;AACnBC,oBAAc,oBADK;AAEnBC,gBAAU,eAFS;AAGnBC,kBAAY,eAHO;AAInBC,oBAAc;AAJK,KAHT;AASZC,0BAAsB;AACpBC,WAAK,6BADe;AAEpBC,gBAAU,kCAFU;AAGpBC,aAAO;AAHa,KATV;AAcZC,cAAU;AACRD,aAAO,CAAE;AACPE,iBAAS,iBADF;AAEPC,eAAO;AAFA,OAAF,EAGJC,0BAAUC,gBAHN,EAIJD,0BAAUE,gBAJN,CADC;AAORR,WAAK,CAAC;AACJI,iBAAS,QADL;AAEJC,eAAO;AAFH,OAAD,EAGF;AACDD,iBAAS,aADR;AAEDC,eAAO;AAFN,OAHE,EAMF;AACDD,iBAAS,SADR;AAEDC,eAAO;AAFN,OANE,CAPG;AAiBRJ,gBAAU,CAAC;AACTG,iBAAS,MADA;AAETC,eAAO;AAFE,OAAD;AAjBF;AAdE;AADS,CAAzB;;IAwCqBI,Y;;;;;;;;;;;;;AAEnB;;;;;;;;;;;uBAI6B,KAAKC,SAAL,CAAe,6BAAf,C;;;AAArBC,4B;;qBACFA,Y;;;;;AACF,qBAAKC,IAAL,CAAUC,KAAV,CAAgB,6BAAhB;;uBACM,KAAKC,UAAL,E;;;;;;;;;;;;;;;;;;mCAIK;AACb,aAAOxB,iBAAiBC,YAAxB;AACD;;;;EAfuCwB,uB;;kBAArBN,Y","file":"LohacoSearch.js","sourcesContent":["import JanSearchBase, { REPLACERS } from './JanSearchBase';\n\nconst LOHACO_CONSTANTS = {\n  searchConfig: {\n    prefix: 'Lohaco',\n    top: 'https://lohaco.jp/',\n    searchPageSelectors: {\n      productsLink: 'div.prodImgBlc > a',\n      nextLink: 'p.nextBtn > a',\n      searchText: '#jsi-txtKeywd',\n      searchButton: 'div.searchBtn',\n    },\n    productPageSelectors: {\n      jan: 'table.prodSpecTable > tbody',\n      category: 'div.blcCategoryNav div.blcCatNav',\n      title: 'title',\n    },\n    replacer: {\n      title: [ {\n        pattern: /.*LOHACO *\\- */g,\n        value: '',\n      }, REPLACERS.toHarfWidthSpace,\n         REPLACERS.toHarfWidthAlnum\n      ],\n      jan: [{\n        pattern: /\\r?\\n/g,\n        value: '',\n      }, {\n        pattern: /.*JANコード\\s*/,\n        value: '',\n      }, {\n        pattern: /\\s+.*$/g,\n        value: '',\n      }],\n      category: [{\n        pattern: /\\s+/g,\n        value: ' ',\n      }],\n    },\n  },\n};\n\nexport default class TajimaSearch extends JanSearchBase {\n\n  /**\n   * 検索可能画面になるまで遷移する。\n   */\n  async init() {\n    const popupedModal = await this.existsAll('div.campaignModal > p.close');\n    if (popupedModal) {\n      this.page.click('div.campaignModal > p.close')\n      await this.waitLoaded();\n    }\n  }\n\n  getSrcConfig() {\n    return LOHACO_CONSTANTS.searchConfig;\n  }\n}\n"]}