{"version":3,"sources":["../../src/site/AeonSearch.js"],"names":["AEON_CONSTANTS","zip1","zip2","searchConfig","prefix","top","searchPageSelectors","productsLink","nextLink","searchText","searchButton","productPageSelectors","jan","category","title","replacer","pattern","value","AeonSearch","existsAll","needInputShop","page","type","click","waitFor","waitLoaded","JanSearchBase"],"mappings":";;;;;;;;AAAA;;AACA;;;;;;;;;;;;;;AAEA,IAAMA,iBAAiB;AACrBC,QAAM,KADe;AAErBC,QAAM,MAFe;AAGrBC,gBAAc;AACZC,YAAQ,MADI;AAEZC,SAAK,8BAFO;AAGZC,yBAAqB;AACnBC,oBAAc,mDADK;AAEnBC,gBAAU,yCAFS;AAGnBC,kBAAY,UAHO;AAInBC,oBAAc;AAJK,KAHT;AASZC,0BAAsB;AACpBC,WAAK,uBADe;AAEpBC,gBAAU,4BAFU;AAGpBC,aAAO;AAHa,KATV;AAcZC,cAAU;AACRD,aAAO,CAAC;AACNE,iBAAS,8BADH;AAENC,eAAO;AAFD,OAAD,CADC;AAKRL,WAAK,CAAC;AACJI,iBAAS,KADL;AAEJC,eAAO;AAFH,OAAD,CALG;AASRJ,gBAAU,CAAC;AACTG,iBAAS,KADA;AAETC,eAAO;AAFE,OAAD,EAGP;AACDD,iBAAS,MADR;AAEDC,eAAO;AAFN,OAHO,EAMP;AACDD,iBAAS,MADR;AAEDC,eAAO;AAFN,OANO,EASP;AACDD,iBAAS,KADR;AAEDC,eAAO;AAFN,OATO;AATF;AAdE;AAHO,CAAvB;;IA2CqBC,U;;;;;;;;;;;;;AAEnB;;;;;;;;;;;uBAI8B,KAAKC,SAAL,CAAe,OAAf,EAAwB,OAAxB,EAAiC,gBAAjC,C;;;AAAtBC,6B;;qBACFA,a;;;;;;uBACI,KAAKC,IAAL,CAAUC,IAAV,CAAe,OAAf,EAAwBtB,eAAeC,IAAvC,C;;;;uBACA,KAAKoB,IAAL,CAAUC,IAAV,CAAe,OAAf,EAAwBtB,eAAeE,IAAvC,C;;;AACN,qBAAKmB,IAAL,CAAUE,KAAV,CAAgB,gBAAhB;;uBACM,KAAKF,IAAL,CAAUG,OAAV,CAAkB,IAAlB,C;;;AACN,qBAAKH,IAAL,CAAUE,KAAV,CAAgB,iDAAhB;AACA;;uBACM,KAAKE,UAAL,E;;;;;;;;;;;;;;;;;;mCAQK;AACb,aAAOzB,eAAeG,YAAtB;AACD;;;;EAxBqCuB,uB;;kBAAnBR,U","file":"AeonSearch.js","sourcesContent":["import { map, mapSeries } from 'p-iteration';\nimport JanSearchBase from './JanSearchBase';\n\nconst AEON_CONSTANTS = {\n  zip1: '214',\n  zip2: '0038',\n  searchConfig: {\n    prefix: 'Aeon',\n    top: 'https://www.aeonnetshop.com/',\n    searchPageSelectors: {\n      productsLink: 'ul.pc2015-item-list-selectable li > a:first-child',\n      nextLink: 'div.pc2015-item-list-header a[rel=next]',\n      searchText: '#keyword',\n      searchButton: 'input[name=search]',\n    },\n    productPageSelectors: {\n      jan: 'div.pc2015-item-other',\n      category: 'div.pc2015-main-block-body',\n      title: 'title',\n    },\n    replacer: {\n      title: [{\n        pattern: /おうちでイオン イオンネットスーパー|: イオン本牧店/g,\n        value: '',\n      }],\n      jan: [{\n        pattern: /\\D/g,\n        value: '',\n      }],\n      category: [{\n        pattern: /\\t/g,\n        value: '',\n      }, {\n        pattern: /^\\n+/,\n        value: '',\n      }, {\n        pattern: /\\n+$/,\n        value: '',\n      }, {\n        pattern: /\\n/g,\n        value: ';',\n      }],\n    },\n  },\n};\n\nexport default class AeonSearch extends JanSearchBase {\n\n  /**\n   * 検索可能画面になるまで遷移する。\n   */\n  async init() {\n    const needInputShop = await this.existsAll('#zip1', '#zip2', '#shop_search_1');\n    if (needInputShop) {\n      await this.page.type('#zip1', AEON_CONSTANTS.zip1);\n      await this.page.type('#zip2', AEON_CONSTANTS.zip2) ;\n      this.page.click('#shop_search_1')\n      await this.page.waitFor(1000);\n      this.page.click('div.pc2015-main div.pc2015-select-menu-result a');\n      // await this.page.waitFor(10000);\n      await this.waitLoaded();\n    }\n    // const banner = await this.existsAll('#pc2015-popup-ad-banner a.pc2015-close');\n    // if (banner) {\n    //   await this.page.click('#pc2015-popup-ad-banner a.pc2015-close');\n    // }\n  }\n\n  getSrcConfig() {\n    return AEON_CONSTANTS.searchConfig;\n  }\n}\n"]}