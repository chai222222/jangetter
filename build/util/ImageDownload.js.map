{"version":3,"sources":["../../src/util/ImageDownload.js"],"names":["name","src","outputFileName","res","axios","get","responseType","ext","substr","lastIndexOf","query","outName","fs","writeFileSync","Buffer","from","data","lastSlash","error","console","log"],"mappings":";;;;;;;AAAA;;AACA;;;;eAEe,OAAOA,IAAP,EAAaC,GAAb,EAAkBC,cAAlB,KAAqC;AAClD,MAAI;AACF,UAAMC,GAAG,GAAG,MAAMC,eAAMC,GAAN,CAAUJ,GAAV,EAAe;AAAEK,MAAAA,YAAY,EAAE;AAAhB,KAAf,CAAlB;AACA,UAAMC,GAAG,GAAGN,GAAG,CAACO,MAAJ,CAAWP,GAAG,CAACQ,WAAJ,CAAgB,GAAhB,CAAX,CAAZ;AACA,UAAMC,KAAK,GAAGH,GAAG,CAACE,WAAJ,CAAgB,GAAhB,CAAd;AACA,UAAME,OAAO,GAAI,GAAET,cAAe,GAAEQ,KAAK,GAAG,CAAR,GAAYH,GAAZ,GAAkBA,GAAG,CAACC,MAAJ,CAAW,CAAX,EAAcE,KAAd,CAAqB,EAA3E;;AACAE,gBAAGC,aAAH,CAAiBF,OAAjB,EAA0B,IAAIG,MAAM,CAACC,IAAX,CAAgBZ,GAAG,CAACa,IAApB,CAA1B,EAAqD,QAArD;;AACA,UAAMC,SAAS,GAAGN,OAAO,CAACF,WAAR,CAAoB,GAApB,CAAlB;AACA,WAAOQ,SAAS,IAAI,CAAb,GAAiBN,OAAO,CAACH,MAAR,CAAeS,SAAS,GAAG,CAA3B,CAAjB,GAAiDA,SAAxD;AACD,GARD,CAQE,OAAOC,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAa,kBAAiBpB,IAAK,mBAAkBkB,KAAM,EAA3D;AACA;AACD;AACF,C","sourcesContent":["import axios from 'axios';\nimport fs from 'fs';\n\nexport default async (name, src, outputFileName) => {\n  try {\n    const res = await axios.get(src, { responseType: 'arraybuffer' })\n    const ext = src.substr(src.lastIndexOf('.'));\n    const query = ext.lastIndexOf('?');\n    const outName = `${outputFileName}${query < 0 ? ext : ext.substr(0, query)}`;\n    fs.writeFileSync(outName, new Buffer.from(res.data), 'binary');\n    const lastSlash = outName.lastIndexOf('/');\n    return lastSlash >= 0 ? outName.substr(lastSlash + 1) : lastSlash;\n  } catch (error) {\n    console.log(`[Image] image [${name}] Couldn't get. ${error}`);\n    return;\n  }\n}\n"],"file":"ImageDownload.js"}