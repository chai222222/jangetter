{"version":3,"sources":["../../src/util/WriterCreator.js"],"names":["CsvWriter","FIELDS","result","constructor","path","write","data","push","close","json2csvParser","Json2csvParser","fields","csv","parse","sjCsv","iconv","encode","fs","writeFile","err","WriterCreator","createCsvWriter"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;AAEA;AACA;AAEA,MAAMA,SAAN,CAAgB;AAED,SAANC,MAAM,GAAG,CAAC,KAAD,EAAQ,OAAR,EAAiB,UAAjB,CAAH;AAEbC,EAAAA,MAAM,GAAG,EAAH;;AAENC,EAAAA,WAAW,CAACC,IAAD,EAAO;AAChB,SAAKA,IAAL,GAAYA,IAAZ;AACD;;AAEDC,EAAAA,KAAK,CAACC,IAAD,EAAO;AACV,SAAKJ,MAAL,CAAYK,IAAZ,CAAiBD,IAAjB;AACD;;AAEDE,EAAAA,KAAK,GAAG;AACN,UAAMC,cAAc,GAAG,IAAIC,gBAAJ,CAAmB;AAACC,MAAAA,MAAM,EAAEX,SAAS,CAACC;AAAnB,KAAnB,CAAvB;AACA,UAAMW,GAAG,GAAGH,cAAc,CAACI,KAAf,CAAqB,KAAKX,MAA1B,CAAZ;;AACA,UAAMY,KAAK,GAAGC,mBAAMC,MAAN,CAAaJ,GAAb,EAAkB,WAAlB,CAAd;;AACAK,gBAAGC,SAAH,CAAa,KAAKd,IAAlB,EAAwBU,KAAxB,EAAgCK,GAAD,IAAS;AACtC,UAAIA,GAAJ,EAAS;AACP,cAAMA,GAAN;AACD;AACF,KAJD;AAKD;;AAvBa;;AA0BD,MAAMC,aAAN,CAAoB;AAEX,SAAfC,eAAe,CAACjB,IAAD,EAAO;AAC3B,WAAO,IAAIJ,SAAJ,CAAcI,IAAd,CAAP;AACD;;AAJgC","sourcesContent":["import fs, { read } from 'fs';\nimport { Parser as Json2csvParser } from 'json2csv';\nimport iconv from 'iconv-lite';\n\n// const json2csvParser = new Json2csvParser({fields});\n// const csv = json2csvParser.parse(result);\n\nclass CsvWriter {\n\n  static FIELDS = ['jan', 'title', 'category'];\n\n  result = [];\n\n  constructor(path) {\n    this.path = path;\n  }\n\n  write(data) {\n    this.result.push(data);\n  }\n\n  close() {\n    const json2csvParser = new Json2csvParser({fields: CsvWriter.FIELDS});\n    const csv = json2csvParser.parse(this.result);\n    const sjCsv = iconv.encode(csv, \"Shift_JIS\");\n    fs.writeFile(this.path, sjCsv, (err) => {\n      if (err) {\n        throw err;\n      }\n    });\n  }\n}\n\nexport default class WriterCreator {\n\n  static createCsvWriter(path) {\n    return new CsvWriter(path);\n  }\n}\n"],"file":"WriterCreator.js"}