{"version":3,"sources":["../../src/util/WriterCreator.js"],"names":["CsvWriter","path","result","data","push","json2csvParser","Json2csvParser","fields","FIELDS","csv","parse","sjCsv","iconv","encode","fs","writeFile","err","WriterCreator"],"mappings":";;;;;;;;AAAA;;;;AACA;;AACA;;;;;;;;AAEA;AACA;;IAEMA,S;AAMJ,qBAAYC,IAAZ,EAAkB;AAAA;;AAAA,SAFlBC,MAEkB,GAFT,EAES;;AAChB,SAAKD,IAAL,GAAYA,IAAZ;AACD;;;;0BAEKE,I,EAAM;AACV,WAAKD,MAAL,CAAYE,IAAZ,CAAiBD,IAAjB;AACD;;;4BAEO;AACN,UAAME,iBAAiB,IAAIC,gBAAJ,CAAmB,EAACC,QAAQP,UAAUQ,MAAnB,EAAnB,CAAvB;AACA,UAAMC,MAAMJ,eAAeK,KAAf,CAAqB,KAAKR,MAA1B,CAAZ;AACA,UAAMS,QAAQC,oBAAMC,MAAN,CAAaJ,GAAb,EAAkB,WAAlB,CAAd;AACAK,mBAAGC,SAAH,CAAa,KAAKd,IAAlB,EAAwBU,KAAxB,EAA+B,UAACK,GAAD,EAAS;AACtC,YAAIA,GAAJ,EAAS;AACP,gBAAMA,GAAN;AACD;AACF,OAJD;AAKD;;;;;;AAvBGhB,S,CAEGQ,M,GAAS,CAAC,KAAD,EAAQ,OAAR,EAAiB,UAAjB,C;;IAwBGS,a;;;;;;;oCAEIhB,I,EAAM;AAC3B,aAAO,IAAID,SAAJ,CAAcC,IAAd,CAAP;AACD;;;;;;kBAJkBgB,a","file":"WriterCreator.js","sourcesContent":["import fs, { read } from 'fs';\nimport { Parser as Json2csvParser } from 'json2csv';\nimport iconv from 'iconv-lite';\n\n// const json2csvParser = new Json2csvParser({fields});\n// const csv = json2csvParser.parse(result);\n\nclass CsvWriter {\n\n  static FIELDS = ['jan', 'title', 'category'];\n\n  result = [];\n\n  constructor(path) {\n    this.path = path;\n  }\n\n  write(data) {\n    this.result.push(data);\n  }\n\n  close() {\n    const json2csvParser = new Json2csvParser({fields: CsvWriter.FIELDS});\n    const csv = json2csvParser.parse(this.result);\n    const sjCsv = iconv.encode(csv, \"Shift_JIS\");\n    fs.writeFile(this.path, sjCsv, (err) => {\n      if (err) {\n        throw err;\n      }\n    });\n  }\n}\n\nexport default class WriterCreator {\n\n  static createCsvWriter(path) {\n    return new CsvWriter(path);\n  }\n}\n"]}