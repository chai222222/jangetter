{"version":3,"sources":["../../src/util/WriterCreator.js"],"names":["CsvWriter","constructor","path","write","data","result","push","close","json2csvParser","Json2csvParser","fields","FIELDS","csv","parse","sjCsv","iconv","encode","fs","writeFile","err","WriterCreator","createCsvWriter"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;AAEA;AACA;AAEA,MAAMA,SAAN,CAAgB;AAMdC,EAAAA,WAAW,CAACC,IAAD,EAAO;AAAA,oCAFT,EAES;;AAChB,SAAKA,IAAL,GAAYA,IAAZ;AACD;;AAEDC,EAAAA,KAAK,CAACC,IAAD,EAAO;AACV,SAAKC,MAAL,CAAYC,IAAZ,CAAiBF,IAAjB;AACD;;AAEDG,EAAAA,KAAK,GAAG;AACN,UAAMC,cAAc,GAAG,IAAIC,gBAAJ,CAAmB;AAACC,MAAAA,MAAM,EAAEV,SAAS,CAACW;AAAnB,KAAnB,CAAvB;AACA,UAAMC,GAAG,GAAGJ,cAAc,CAACK,KAAf,CAAqB,KAAKR,MAA1B,CAAZ;;AACA,UAAMS,KAAK,GAAGC,mBAAMC,MAAN,CAAaJ,GAAb,EAAkB,WAAlB,CAAd;;AACAK,gBAAGC,SAAH,CAAa,KAAKhB,IAAlB,EAAwBY,KAAxB,EAAgCK,GAAD,IAAS;AACtC,UAAIA,GAAJ,EAAS;AACP,cAAMA,GAAN;AACD;AACF,KAJD;AAKD;;AAvBa;;gBAAVnB,S,YAEY,CAAC,KAAD,EAAQ,OAAR,EAAiB,UAAjB,C;;AAwBH,MAAMoB,aAAN,CAAoB;AAEX,SAAfC,eAAe,CAACnB,IAAD,EAAO;AAC3B,WAAO,IAAIF,SAAJ,CAAcE,IAAd,CAAP;AACD;;AAJgC","sourcesContent":["import fs, { read } from 'fs';\nimport { Parser as Json2csvParser } from 'json2csv';\nimport iconv from 'iconv-lite';\n\n// const json2csvParser = new Json2csvParser({fields});\n// const csv = json2csvParser.parse(result);\n\nclass CsvWriter {\n\n  static FIELDS = ['jan', 'title', 'category'];\n\n  result = [];\n\n  constructor(path) {\n    this.path = path;\n  }\n\n  write(data) {\n    this.result.push(data);\n  }\n\n  close() {\n    const json2csvParser = new Json2csvParser({fields: CsvWriter.FIELDS});\n    const csv = json2csvParser.parse(this.result);\n    const sjCsv = iconv.encode(csv, \"Shift_JIS\");\n    fs.writeFile(this.path, sjCsv, (err) => {\n      if (err) {\n        throw err;\n      }\n    });\n  }\n}\n\nexport default class WriterCreator {\n\n  static createCsvWriter(path) {\n    return new CsvWriter(path);\n  }\n}\n"],"file":"WriterCreator.js"}